{"ast":null,"code":"import UtilCommon from './UtilCommon';\nimport UtilDevice from './UtilDevice';\n\nclass UtilUser {\n  constructor(props) {\n    this.userInfo = null;\n  }\n\n  async init() {\n    await this.isLogin();\n    return Promise.resolve();\n  }\n\n  async setUserInfo(userInfo) {\n    this.userInfo = userInfo;\n    return this.userInfo;\n  }\n\n  async getUserInfo() {\n    if (this.isInvalid()) {\n      await this.init();\n    }\n\n    return this.userInfo;\n  }\n\n  async getUserId() {\n    if (this.isInvalid()) {\n      await this.init();\n    }\n\n    return this.userInfo.userId;\n  }\n\n  async getUserToken() {\n    if (this.isInvalid()) {\n      await this.init();\n    }\n\n    return this.userInfo.token;\n  }\n\n  isInvalid() {\n    return !this.userInfo || !this.userInfo.userId || !this.userInfo.token;\n  }\n\n}\n\nlet instance;\nexport default (() => {\n  if (!instance) {\n    instance = new UtilUser(); // await instance.init()\n  }\n\n  return instance;\n})();","map":{"version":3,"sources":["/Users/guolongfei/Documents/Project2/PublicUse/node_modules/npmglf/lib/utils/UtilUser.js"],"names":["UtilCommon","UtilDevice","UtilUser","constructor","props","userInfo","init","isLogin","Promise","resolve","setUserInfo","getUserInfo","isInvalid","getUserId","userId","getUserToken","token","instance"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,SAAKC,QAAL,GAAgB,IAAhB;AACH;;AAED,QAAMC,IAAN,GAAa;AACT,UAAM,KAAKC,OAAL,EAAN;AACA,WAAOC,OAAO,CAACC,OAAR,EAAP;AACH;;AAED,QAAMC,WAAN,CAAkBL,QAAlB,EAA4B;AACxB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,WAAO,KAAKA,QAAZ;AACH;;AAED,QAAMM,WAAN,GAAoB;AAChB,QAAI,KAAKC,SAAL,EAAJ,EAAsB;AAClB,YAAM,KAAKN,IAAL,EAAN;AACH;;AACD,WAAO,KAAKD,QAAZ;AACH;;AAED,QAAMQ,SAAN,GAAkB;AACd,QAAI,KAAKD,SAAL,EAAJ,EAAsB;AAClB,YAAM,KAAKN,IAAL,EAAN;AACH;;AACD,WAAO,KAAKD,QAAL,CAAcS,MAArB;AACH;;AAED,QAAMC,YAAN,GAAqB;AACjB,QAAI,KAAKH,SAAL,EAAJ,EAAsB;AAClB,YAAM,KAAKN,IAAL,EAAN;AACH;;AACD,WAAO,KAAKD,QAAL,CAAcW,KAArB;AACH;;AAEDJ,EAAAA,SAAS,GAAG;AACR,WAAQ,CAAC,KAAKP,QAAN,IAAkB,CAAC,KAAKA,QAAL,CAAcS,MAAjC,IAA2C,CAAC,KAAKT,QAAL,CAAcW,KAAlE;AACH;;AAtCU;;AAyCf,IAAIC,QAAJ;AAEA,eAAe,CAAC,MAAM;AAClB,MAAI,CAACA,QAAL,EAAe;AACXA,IAAAA,QAAQ,GAAG,IAAIf,QAAJ,EAAX,CADW,CAEX;AACH;;AACD,SAAOe,QAAP;AACH,CANc,GAAf","sourcesContent":["import UtilCommon from './UtilCommon'\nimport UtilDevice from './UtilDevice'\n\nclass UtilUser {\n    constructor(props) {\n        this.userInfo = null\n    }\n\n    async init() {\n        await this.isLogin()\n        return Promise.resolve()\n    }\n\n    async setUserInfo(userInfo) {\n        this.userInfo = userInfo\n        return this.userInfo\n    }\n\n    async getUserInfo() {\n        if (this.isInvalid()) {\n            await this.init()\n        }\n        return this.userInfo\n    }\n\n    async getUserId() {\n        if (this.isInvalid()) {\n            await this.init()\n        }\n        return this.userInfo.userId\n    }\n\n    async getUserToken() {\n        if (this.isInvalid()) {\n            await this.init()\n        }\n        return this.userInfo.token\n    }\n\n    isInvalid() {\n        return (!this.userInfo || !this.userInfo.userId || !this.userInfo.token)\n    }\n}\n\nlet instance;\n\nexport default (() => {\n    if (!instance) {\n        instance = new UtilUser()\n        // await instance.init()\n    }\n    return instance\n})()\n"]},"metadata":{},"sourceType":"module"}