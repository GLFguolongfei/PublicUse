{"ast":null,"code":"import UtilExt from './UtilExt';\nexport default new class UtilCommon {\n  /**\n   *\n   * @desc 根据身份证号获取关键信息（生日/年龄/性别）\n   * @param {string} idcard 身份证号码\n   * @param {string|number} type 获取类别： 1-获取出生日期，2-获取性别，3-获取年龄\n   * @returns {string|number}\n   * @example\n   * ('110110199201011010', 1) => '1992-01-01'\n   * ('110110199201011010', 2) => 0-男 1-女\n   * ('110110199201011010', 3) => 27-周岁\n   */\n  getIdCardKeys(idcard, type) {\n    if (UtilExt.isEmpty(idcard)) {\n      return \"\";\n    }\n\n    if (+type === 1) {\n      // 获取出生日期\n      var birthday = idcard.substring(6, 10) + \"-\" + idcard.substring(10, 12) + \"-\" + idcard.substring(12, 14);\n      return birthday;\n    }\n\n    if (+type === 2) {\n      // 获取性别\n      var sex = 0;\n\n      if (idcard.length === 18) {\n        sex = parseInt(idcard.substr(16, 1));\n      } else {\n        sex = parseInt(idcard.substr(14, 1));\n      }\n\n      if (sex % 2 === 1) {\n        return 0; //男\n      } else {\n        return 1; //女\n      }\n    }\n\n    if (+type === 3) {\n      // 获取年龄\n      var myDate = new Date();\n      var month = myDate.getMonth() + 1;\n      var day = myDate.getDate();\n      var age = myDate.getFullYear() - idcard.substring(6, 10) - 1; // eslint-disable-next-line no-mixed-operators\n\n      if (idcard.substring(10, 12) < month || idcard.substring(10, 12) === month && idcard.substring(12, 14) <= day) {\n        age++;\n      }\n\n      return age;\n    }\n  }\n  /**\n   * @description 获取假header\n   * @memberof UtilCommon\n   */\n\n\n  getResponseHeader() {\n    return {\n      \"channelSource\": \"101\",\n      // 100-wxMini 101-app\n      \"uid\": \"454\",\n      \"clientIp\": \"\",\n      \"clientName\": \"ios\",\n      \"clientVersion\": \"1.3.1\",\n      \"timestamp\": \"1586834575\",\n      \"appId\": \"60103\",\n      \"deviceId\": \"6F1B04D5-105B-44FC-A069-3BB47D780CC7\",\n      \"deviceType\": 2,\n      \"requestId\": \"\",\n      \"version\": \"1.3.1\",\n      \"token\": \"101_579f30c3f2fcbb71db059519ffecdbd8\",\n      \"customerData\": \"\"\n    };\n  }\n  /**\n   * @description rem转像素\n   * @param {number} rem\n   * @returns {number}\n   */\n\n\n  rem2px(rem) {\n    const html = document.documentElement;\n    const ratio = parseFloat((html.currentStyle || getComputedStyle(html)).fontSize);\n    return rem * ratio;\n  }\n  /**\n   * @description 像素转rem\n   * @param {number} px\n   * @returns {number}\n   */\n\n\n  px2rem(px) {\n    const html = document.documentElement;\n    const ratio = parseFloat((html.currentStyle || getComputedStyle(html)).fontSize);\n    return (px / ratio).toFixed(4);\n  }\n  /**\n   * @description 获取uri参数\n   * @param {string} [name] 获取key对应的value，若未传，则获取全部\n   * @returns\n   */\n\n\n  urlQuery(name) {\n    if (name) {\n      const reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n      const r = window.location.search.substr(1).match(reg);\n\n      if (r != null) {\n        return decodeURIComponent(r[2]);\n      }\n\n      return null;\n    } else {\n      const r = window.location.search.substr(1);\n      let params = {};\n      if (!r) return JSON.stringify(params);\n      r.split('&').forEach(it => {\n        const snippet = it.split('=');\n        params[snippet[0]] = decodeURIComponent(snippet[1]);\n      });\n      return JSON.stringify(params);\n    }\n  }\n  /**\n   * @description 获取固定尺寸图片链接\n   * @param {string} url 图片链接\n   * @param {number} type 尺寸类型\n   * @returns\n   */\n\n\n  creatImgUrl(url, type) {\n    if (UtilExt.isEmpty(url)) {\n      return \"\";\n    }\n\n    let array = url.split(\".\");\n\n    if (array.length < 2) {\n      return url;\n    }\n\n    let imgUrl = \"\";\n\n    switch (type) {\n      case 1:\n        imgUrl = this._returnImgStr(array, \"_750_500\");\n        break;\n\n      case 2:\n        imgUrl = this._returnImgStr(array, \"_600_200\");\n        break;\n\n      case 3:\n        imgUrl = this._returnImgStr(array, \"_400_400\");\n        break;\n\n      case 4:\n        imgUrl = this._returnImgStr(array, \"_300_200\");\n        break;\n\n      case 5:\n        imgUrl = this._returnImgStr(array, \"_80_80\");\n        break;\n\n      default:\n        imgUrl = url;\n    }\n\n    return imgUrl;\n  }\n\n  _returnImgStr(array, str) {\n    let imgStr = \"\";\n\n    for (let i = 0; i < array.length; i++) {\n      if (+i === array.length - 1) {\n        imgStr += str;\n      }\n\n      if (+i !== 0) {\n        imgStr += \".\";\n      }\n\n      imgStr += array[i];\n    }\n\n    return imgStr;\n  }\n\n}();","map":{"version":3,"sources":["/Users/guolongfei/Documents/Project2/PublicUse/node_modules/npmglf/lib/utils/UtilCommon.js"],"names":["UtilExt","UtilCommon","getIdCardKeys","idcard","type","isEmpty","birthday","substring","sex","length","parseInt","substr","myDate","Date","month","getMonth","day","getDate","age","getFullYear","getResponseHeader","rem2px","rem","html","document","documentElement","ratio","parseFloat","currentStyle","getComputedStyle","fontSize","px2rem","px","toFixed","urlQuery","name","reg","RegExp","r","window","location","search","match","decodeURIComponent","params","JSON","stringify","split","forEach","it","snippet","creatImgUrl","url","array","imgUrl","_returnImgStr","str","imgStr","i"],"mappings":"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","sourcesContent":["import UtilExt from './UtilExt';\n\nexport default new (class UtilCommon {\n    /**\n     *\n     * @desc 根据身份证号获取关键信息（生日/年龄/性别）\n     * @param {string} idcard 身份证号码\n     * @param {string|number} type 获取类别： 1-获取出生日期，2-获取性别，3-获取年龄\n     * @returns {string|number}\n     * @example\n     * ('110110199201011010', 1) => '1992-01-01'\n     * ('110110199201011010', 2) => 0-男 1-女\n     * ('110110199201011010', 3) => 27-周岁\n     */\n    getIdCardKeys(idcard, type) {\n        if (UtilExt.isEmpty(idcard)) {\n            return \"\";\n        }\n        if (+type === 1) { // 获取出生日期\n            var birthday = idcard.substring(6, 10) + \"-\" + idcard.substring(10, 12) + \"-\" + idcard.substring(12, 14);\n            return birthday;\n        }\n        if (+type === 2) { // 获取性别\n            var sex = 0;\n            if (idcard.length === 18) {\n                sex = parseInt(idcard.substr(16, 1));\n            } else {\n                sex = parseInt(idcard.substr(14, 1));\n            }\n            if (sex % 2 === 1) {\n                return 0; //男\n            } else {\n                return 1; //女\n            }\n        }\n        if (+type === 3) { // 获取年龄\n            var myDate = new Date();\n            var month = myDate.getMonth() + 1;\n            var day = myDate.getDate();\n            var age = myDate.getFullYear() - idcard.substring(6, 10) - 1;\n            // eslint-disable-next-line no-mixed-operators\n            if (idcard.substring(10, 12) < month || idcard.substring(10, 12) === month && idcard.substring(12, 14) <= day) {\n                age++;\n            }\n            return age;\n        }\n    }\n\n    /**\n     * @description 获取假header\n     * @memberof UtilCommon\n     */\n    getResponseHeader() {\n        return {\n            \"channelSource\": \"101\", // 100-wxMini 101-app\n            \"uid\": \"454\",\n            \"clientIp\": \"\",\n            \"clientName\": \"ios\",\n            \"clientVersion\": \"1.3.1\",\n            \"timestamp\": \"1586834575\",\n            \"appId\": \"60103\",\n            \"deviceId\": \"6F1B04D5-105B-44FC-A069-3BB47D780CC7\",\n            \"deviceType\": 2,\n            \"requestId\": \"\",\n            \"version\": \"1.3.1\",\n            \"token\": \"101_579f30c3f2fcbb71db059519ffecdbd8\",\n            \"customerData\": \"\"\n        }\n    }\n\n\n    /**\n     * @description rem转像素\n     * @param {number} rem\n     * @returns {number}\n     */\n    rem2px(rem) {\n        const html = document.documentElement\n        const ratio = parseFloat((html.currentStyle || getComputedStyle(html)).fontSize)\n        return rem * ratio\n    }\n\n    /**\n     * @description 像素转rem\n     * @param {number} px\n     * @returns {number}\n     */\n    px2rem(px) {\n        const html = document.documentElement\n        const ratio = parseFloat((html.currentStyle || getComputedStyle(html)).fontSize)\n        return (px / ratio).toFixed(4)\n    }\n\n    /**\n     * @description 获取uri参数\n     * @param {string} [name] 获取key对应的value，若未传，则获取全部\n     * @returns\n     */\n    urlQuery(name) {\n        if (name) {\n            const reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n            const r = window.location.search.substr(1).match(reg);\n            if (r != null) {\n                return decodeURIComponent(r[2]);\n            }\n\n            return null;\n        } else {\n            const r = window.location.search.substr(1)\n            let params = {};\n            if (!r) return JSON.stringify(params)\n\n            r.split('&').forEach(it => {\n                const snippet = it.split('=')\n                params[snippet[0]] = decodeURIComponent(snippet[1])\n            })\n            return JSON.stringify(params)\n        }\n    }\n\n    /**\n     * @description 获取固定尺寸图片链接\n     * @param {string} url 图片链接\n     * @param {number} type 尺寸类型\n     * @returns\n     */\n    creatImgUrl(url, type) {\n        if (UtilExt.isEmpty(url)) {\n            return \"\";\n        }\n        let array = url.split(\".\");\n        if (array.length < 2) {\n            return url;\n        }\n        let imgUrl = \"\";\n        switch (type) {\n            case 1:\n                imgUrl = this._returnImgStr(array, \"_750_500\");\n                break;\n            case 2:\n                imgUrl = this._returnImgStr(array, \"_600_200\");\n                break;\n            case 3:\n                imgUrl = this._returnImgStr(array, \"_400_400\");\n                break;\n            case 4:\n                imgUrl = this._returnImgStr(array, \"_300_200\");\n                break;\n            case 5:\n                imgUrl = this._returnImgStr(array, \"_80_80\");\n                break;\n            default:\n                imgUrl = url;\n        }\n        return imgUrl;\n    }\n\n    _returnImgStr(array, str) {\n        let imgStr = \"\";\n        for (let i = 0; i < array.length; i++) {\n            if (+i === array.length - 1) {\n                imgStr += str;\n            }\n            if (+i !== 0) {\n                imgStr += \".\";\n            }\n            imgStr += array[i];\n        }\n        return imgStr;\n    }\n})()\n"]},"metadata":{},"sourceType":"module"}